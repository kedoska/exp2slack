!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("exp2slack",[],n):"object"==typeof exports?exports.exp2slack=n():e.exp2slack=n()}(global,function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=4)}([function(e,n){e.exports=require("@slack/client")},function(e,n){e.exports=require("error-stack-parser")},function(e){e.exports={name:"@kedoska/exp2slack",version:"0.1.2",description:"Send errors to slack",main:"lib/exp2slack.js",engines:{node:">=6.10"},scripts:{build:"webpack --mode production","build-dev":"webpack --mode development"},homepage:"https://github.com/kedoska/exp2slack/blob/master/README.md",repository:{type:"git",url:"https://github.com/kedoska/exp2slack.git"},keywords:["monitor","error","javascript","slack","express","middleware"],author:"Marco Casula <marco.casula@gmail.com>",license:"MIT",dependencies:{"@slack/client":"^4.3.1","error-stack-parser":"^2.0.2"},devDependencies:{"@babel/core":"^7.0.0-beta.51","@babel/plugin-transform-runtime":"^7.0.0-beta.51","@babel/preset-env":"^7.0.0-beta.51","babel-loader":"^8.0.0-beta.3",express:"^4.16.3",webpack:"^4.12.0","webpack-cli":"^3.0.8","webpack-node-externals":"^1.7.2"}}},function(e,n){e.exports=require("os")},function(e,n,t){"use strict";(function(n){var o=t(3),r=o.hostname,c=o.platform,a=o.release,i=t(2),u=t(1),s=t(0).IncomingWebhook,l=void 0,f=function(e){if(!function(e){return e instanceof Error}(e))return[];var n=u.parse(e);return n.length<=0?[]:n},p=function(e,t){var o=f(e),u=o&&o.length>0?[function(e,t){var o=e.fileName.replace(n,"");return{color:"#ff0000",title:"".concat(e.functionName," ").concat(o," line ").concat(e.lineNumber),text:":boom: ".concat(t)}}(o[0],e.message),function(){var e="";(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(e){return e.functionName}).forEach(function(t,o){var r=t.fileName.replace(n,"");if(r.indexOf("node_modules")>-1){var c=r.split("/")[2];r="win32"===process.platform?r.replace("\\node_modules\\".concat(c),"-> ".concat(c)):r.replace("/node_modules/".concat(c),"-> ".concat(c))}if(0===o)return{};var a=t.functionName.indexOf("anonymous")>-1?"anonymous function":t.functionName;e+="".concat(a," ").concat(r," line *").concat(t.lineNumber,"*\n")});return{text:e,ts:(new Date).getTime()/1e3}}(o)]:[],s={text:"".concat(i.name," ").concat(i.version," at ").concat(r()," ").concat(c()," ").concat(a()),attachments:u};l.send(s,function(n){t&&t(e)})},d=function(e){return l=new s(e),function(n,t,o,r){e||process.env.SLACK_WEBHOOK_URL;if(!e)return r(new Error("SLACK_WEBHOOK_URL is required to initialize IncomingWebhook"));p(n,r)}};e.exports=d,e.exports.configure=d,e.exports.notify=p}).call(this,"/")}])});
//# sourceMappingURL=exp2slack.js.map